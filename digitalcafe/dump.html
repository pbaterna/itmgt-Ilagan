{% if session["cart"] is defined %}
            <table>
            <tr><th>Name</th><th>Quantity</th><th>Price per</th><th>Subtotal</th></tr>
            {% for item in session["cart"].values() %}
                        <tr><td>{{ item["name"] }}</td><td>{{ item["qty"] }}</td><td>{{ item["price"] }}</td><td>{{ item["subtotal"] }}</td></tr>
            {% endfor %}
            <tr><td colspan=3><b>Total</b></td><td><b>{{ session["cart"].values()|sum(attribute="subtotal") }}</b></td></tr>
            </table>
            {% else %}
            <div>Your cart is empty</div>
            {% endif %}


@app.route('/')
def index():
    return render_template('index.html', page="Index")

<form action="" method="post">
    <input name="qty">
           
    <div class= "clearfix">
        <button type="submit" name="update_cart" class="btn btn-info pull-right">Update Cart</button>
    </div>
</form>

<a href="/post/{{ cart_item.product_id }}">{{ cart_item.product_title }}</a></td>


<form action="" method="post">
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Name</th>
                    <th width="100">Qty</th>
                </tr>
            </thead>
            <tbody>
            {% for cart_item in session.cart %}
                <tr>
                    <td><a href="/post/{{ cart_item.product_id }}">{{ cart_item.product_title }}</a></td>

                    <td>
                        <div class="form-group">
                            <input class="form-control" type="number" name="change_qty" min="1" max="10" value="{{ cart_item.qty }}">
                        </div>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="clearfix">
        <button type="submit" name="update_cart" class="btn btn-info pull-right">Update Cart</button>
    </div>
</form>

///
<tr><td>{{ item["name"] }}</td>
    <td><input type="number" name="qty_cart" value="{{ item["qty"] }}"><input type="hidden" name="price" value='{{ item["price"] }}'><input type="hidden" name="name" value='{{ item["name]}}'></td>
    <td>{{ item["subtotal"] }}</td></tr>
///


{% for item in session["cart"].values() %}
                <tr><td><a href="/productdetails?code={{item["code"]}}">{{item["name"]}}</a></td> <td>
                        <div class="form-group">
                            <input class="form-control" type="number" name="change_qty" min="1" max="10" value="{{item["qty"]}}">
                        </div>
                    <td><a href="productdetails?code={{item["code"]}}">{{item["subtotal"]}}</a></td>
                    </td>
                <td>
    <div class="clearfix">
        <button type="delete" name="remove_item" class="btn btn-info pull-right">Remove</button>
    </div></td>
                </tr>
            {% endfor %}


    item["qty"] = int(qty)
    item["subtotal"] = product["price"]*item["qty"]
